- name: Check for existing eCMTS package on the server
      shell: rpm -qa | grep eCMTS || true
      register: ecmts_output
 
    - name: Print the existing eCMTS package
      debug:
        msg: >-
          {% if ecmts_output.stdout == "" %}
          No eCMTS packages are installed.
          {% else %}
          eCMTS version(s) installed: {{ ecmts_output.stdout }}
          {% endif %}

trying to ununstall the paxkage in the below task:
- name: Uninstall current eCMTS package
      command: rpm -e {{ item }} --nodeps
      with_items: "{{ ecmts_output.split('\n') }}"
      register: uninstall_result
      ignore_errors: true
      when: ecmts_output != ""

but showing error:


TASK [Uninstall current eCMTS package] *****************************************
fatal: [ecmts-server]: FAILED! => {"msg": "'dict object' has no attribute 'split'. 'dict object' has no attribute 'split'"}
...ignoring
