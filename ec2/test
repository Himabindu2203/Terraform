---
- name: Upgrade eCMTS version 
  hosts: "{{ target_host }}"
  become: yes
  tasks:

    - name: Run eCMTS processes on all IPs of server
      command: eCMTS -c /opt/etc/config/{{ item }}.json 
      async: 31536000  
      poll: 0
      register: async_task
      loop:
        - eCMTS
        - eCMTS1
        - eCMTS2
        - eCMTS3
        - eCMTS4
        - eCMTS5
        - eCMTS6
        - eCMTS7
        - eCMTS8
        - eCMTS9

    - name: Check for running eCMTS processes
      shell: ps -ef | grep eCMTS
      register: ecmts_processes
      ignore_errors: true
      failed_when: false
  - name: Print the running eCMTS processes
      debug:
        msg: "{{ ecmts_processes.stdout if ecmts_processes.stdout else 'No process running' }}"

here, after running ecmts processes inall servers, we are just checking and printing the processes for all. but need to validate whether the processes is running or not in all the servers.suppose if i run for ecmts processes for all servers, some how ecmts4 server processess is not running, so we have to validate for all the servers in check for running task. please update the code and share to me. 
